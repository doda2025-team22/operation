# Global configuration
global:
  domain: "local"
  stableSubdomain: "team22"
  prereleaseSubdomain: "team22-dev"
  ingressGatewayName: team22-gateway

config:
  appConfig:
    FEATURE_FLAG_TEST: "true"
    API_TIMEOUT_MS: "5000"

# Application configuration
app:
  stable:
    image:
      repository: ghcr.io/doda2025-team22/app
      tag: latest
    replicaCount: 1
    port: 8080
  canary:
    image:
      repository: ghcr.io/doda2025-team22/app
      tag: latest
    replicaCount: 1
    port: 8080
  canaryWeight: 10
  stableWeight: 90

# Model service configuration
modelservice:
  stable:
    image:
      repository: ghcr.io/doda2025-team22/model-service
      tag: latest
    replicaCount: 1
    port: 8081
  canary:
    image:
      repository: ghcr.io/doda2025-team22/model-service
      tag: latest
    replicaCount: 1
    port: 8081
  canaryWeight: 10
  stableWeight: 90


# Monitoring configuration
monitoring:
  enabled: true
  prometheusRelease: monitoring

# kube-prometheus-stack subchart configuration
kube-prometheus-stack:
  # Enable Grafana from kube-prometheus-stack
  grafana:
    enabled: true
    # Admin credentials loaded from secret (grafana-admin-secret)
    admin:
      existingSecret: grafana-admin-secret
      userKey: admin-user
      passwordKey: admin-password
    service:
      type: ClusterIP
    persistence:
      enabled: false
    sidecar:
      datasources:
        enabled: true
        label: grafana_datasource
        labelValue: "1"
      dashboards:
        enabled: true
        label: grafana_dashboard
        labelValue: "1"
  prometheus:
    prometheusSpec:
      serviceMonitorSelector:
        matchLabels:
          release: monitoring
      serviceMonitorNamespaceSelector: {}

# Grafana configuration (for Istio routing)
grafana:
  enabled: true
  grafanaHost: "grafana.local"

# Secrets configuration
secret:
  smtp:
    username: "usrnm"
    password: "pswrd"
  grafana:
    adminUser: "admin"
    adminPassword: "admin"